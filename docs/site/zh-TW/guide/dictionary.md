# 字典管理

字典管理用於維護系統中的各類枚舉值或常量列表（如“國家”、“幣種”、“狀態碼”等）。在 PieMDM 中，字典作為重要的數據源配置，廣泛應用於下拉選擇、單選框等字段。

## 字典類別

PieMDM 支持兩種形式的字典：

### 1. 系統通用字典
系統默認提供了一個名為 `dict_item` 的內置表，用於統一存儲簡單的鍵值對數據。
- **存儲方式**：所有通用字典項都存儲在 `dict_item` 表中。
- **區分標識**：通過 `dict_code`（字典代碼）來區分不同的字典類別（例如 `GENDER` 代表性別，`ORDER_STATUS` 代表訂單狀態）。

### 2. 基於業務表的字典
您可以直接將任何業務模型（如“物料表”、“供應商表”）作為字典使用。
- **動態性**：字典內容隨著業務數據的增刪改實時變化。
- **配置靈活**：可以指定該表中的哪一列作為“數據鍵 (Value)”，哪一列作為“顯示標籤 (Label)”。

## 配置字典字段

在“表與字段管理”中，當您為字段選擇“選擇類型”（如下拉單選、複選框組）時，需要配置數據源。

### 關聯系統字典
1. 在字段的“關聯配置”中，目標表選擇 `dict_item`。
2. 在“過濾條件”中，設置 `dict_code` 為對應的字典代碼（如 `NATION`）。
3. 值字段通常配置為 `code`，顯示字段通常配置為 `name`。

### 關聯業務表
1. 目標表選擇對應的業務表（如 `mdm_company`）。
2. 根據需要設置過濾條件（如 `status = 'Normal'`）。
3. 指定用於存儲的值字段（如 `id` 或 `company_code`）和顯示的標籤字段（如 `company_name`）。

## 字典服務特性

PieMDM 的前端提供了一個高效的字典管理服務 (`dictionaryService`)，具有以下特性：

- **緩存機制**：同一個字典在頁面多次引用時，僅會發起一次 API 請求，後續直接讀取內存緩存。
- **請求合併**：如果多個組件同時請求同一個字典，服務會自動合併請求，避免網絡冗餘。
- **預加載**：支持在頁面初始化時根據字段配置自動掃描並預加載所需的全部字典數據，提升首屏渲染速度。
- **通用適配**：無論是系統內置的 `dict_item` 還是普通業務表，都通過統一的 API 接口進行數據拉取。

## 管理建議

1. **統一編碼**：對於跨系統的基礎數據，建議參考國家標準或行業標準進行編碼（如 ISO 貨幣代碼）。
2. **描述清晰**：為每個字典項提供清晰的描述，方便用戶理解其業務含義。
3. **分權管理**：核心系統字典（如系統配置項）應僅限管理員修改。
